(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}if("undefined"==typeof jQuery)throw new Error("MDTimePicker: This plugin requires jQuery");var t,i,s,r,n;t=jQuery,i="mdtimepicker",s=[9,112,113,114,115,116,117,118,119,120,121,122,123],r=function(e,i){this.hour=e,this.minute=i,this.format=function(e,i){var s=this,r=(e.match(/h/g)||[]).length>1;return t.trim(e.replace(/(hh|h|mm|ss|tt|t)/g,(function(e){switch(e.toLowerCase()){case"h":var t=s.getHour(!0);return i&&10>t?"0"+t:t;case"hh":return s.hour<10?"0"+s.hour:s.hour;case"mm":return s.minute<10?"0"+s.minute:s.minute;case"ss":return"00";case"t":return r?"":s.getT().toLowerCase();case"tt":return r?"":s.getT()}})))},this.setHour=function(e){this.hour=e},this.getHour=function(e){return e?0===this.hour||12===this.hour?12:this.hour%12:this.hour},this.invert=function(){"AM"===this.getT()?this.setHour(this.getHour()+12):this.setHour(this.getHour()-12)},this.setMinutes=function(e){this.minute=e},this.getMinutes=function(){return this.minute},this.getT=function(){return this.hour<12?"AM":"PM"}},n=function(e,i){var n=this;this.visible=!1,this.activeView="hours",this.hTimeout=null,this.mTimeout=null,this.input=t(e),this.config=i,this.time=new r(0,0),this.selected=new r(0,0),this.timepicker={overlay:t('<div class="mdtimepicker hidden"></div>'),wrapper:t('<div class="mdtp__wrapper"></div>'),timeHolder:{wrapper:t('<section class="mdtp__time_holder"></section>'),hour:t('<span class="mdtp__time_h">12</span>'),dots:t('<span class="mdtp__timedots">:</span>'),minute:t('<span class="mdtp__time_m">00</span>'),am_pm:t('<span class="mdtp__ampm">AM</span>')},clockHolder:{wrapper:t('<section class="mdtp__clock_holder"></section>'),am:t('<span class="mdtp__am">AM</span>'),pm:t('<span class="mdtp__pm">PM</span>'),clock:{wrapper:t('<div class="mdtp__clock"></div>'),dot:t('<span class="mdtp__clock_dot"></span>'),hours:t('<div class="mdtp__hour_holder"></div>'),minutes:t('<div class="mdtp__minute_holder"></div>')},buttonsHolder:{wrapper:t('<div class="mdtp__buttons">'),btnOk:t('<span class="mdtp__button ok">Ok</span>'),btnCancel:t('<span class="mdtp__button cancel">Cancel</span>')}}};var o=n.timepicker;if(n.setup(o).appendTo("body"),o.clockHolder.am.click((function(){"AM"!==n.selected.getT()&&n.setT("am")})),o.clockHolder.pm.click((function(){"PM"!==n.selected.getT()&&n.setT("pm")})),o.timeHolder.hour.click((function(){"hours"!==n.activeView&&n.switchView("hours")})),o.timeHolder.minute.click((function(){"minutes"!==n.activeView&&n.switchView("minutes")})),o.clockHolder.buttonsHolder.btnOk.click((function(){n.setValue(n.selected);var e=n.getFormattedTime();n.input.trigger(t.Event("timechanged",{time:e.time,value:e.value})).trigger("onchange").trigger("change"),n.hide()})),o.clockHolder.buttonsHolder.btnCancel.click((function(){n.hide()})),n.input.on("keydown",(function(e){return 13===e.keyCode&&n.show(),!(s.indexOf(e.which)<0&&n.config.readOnly)})).on("click",(function(){n.show()})).prop("readonly",n.config.readOnly),""!==n.input.val()){var a=n.parseTime(n.input.val(),n.config.format);n.setValue(a)}else a=n.getSystemTime(),n.time=new r(a.hour,a.minute);n.resetSelected(),n.switchView(n.activeView)},n.prototype={constructor:n,setup:function(e){if(void 0===e)throw new Error("Expecting a value.");var i=this,s=e.overlay,r=e.wrapper,n=e.timeHolder,o=e.clockHolder;n.wrapper.append(n.hour).append(n.dots).append(n.minute).append(n.am_pm).appendTo(r);for(var a=0;12>a;a++){var c=a+1,m=t('<div class="mdtp__digit rotate-'+(120+30*a)%360+'" data-hour="'+c+'"><span>'+c+"</span></div>");m.find("span").click((function(){var e=parseInt(t(this).parent().data("hour")),s=i.selected.getT(),r=(e+("PM"===s&&12>e||"AM"===s&&12===e?12:0))%24;i.setHour(r),i.switchView("minutes")})),o.clock.hours.append(m)}for(a=0;60>a;a++){var u=10>a?"0"+a:a,d=t('<div class="mdtp__digit rotate-'+(90+6*a)%360+'" data-minute="'+a+'"></div>');a%5==0?d.addClass("marker").html("<span>"+u+"</span>"):d.html("<span></span>"),d.find("span").click((function(){i.setMinute(t(this).parent().data("minute"))})),o.clock.minutes.append(d)}switch(o.clock.wrapper.append(o.am).append(o.pm).append(o.clock.dot).append(o.clock.hours).append(o.clock.minutes).appendTo(o.wrapper),o.buttonsHolder.wrapper.append(o.buttonsHolder.btnCancel).append(o.buttonsHolder.btnOk).appendTo(o.wrapper),o.wrapper.appendTo(r),i.config.theme){case"red":case"blue":case"green":case"purple":case"indigo":case"teal":r.attr("data-theme",i.config.theme);break;default:r.attr("data-theme",t.fn.mdtimepicker.defaults.theme)}return r.appendTo(s),s},setHour:function(e){if(void 0===e)throw new Error("Expecting a value.");var i=this;this.selected.setHour(e),this.timepicker.timeHolder.hour.text(this.selected.getHour(!0)),this.timepicker.clockHolder.clock.hours.children("div").each((function(e,s){var r=t(s),n=r.data("hour");r[n===i.selected.getHour(!0)?"addClass":"removeClass"]("active")}))},setMinute:function(e){if(void 0===e)throw new Error("Expecting a value.");this.selected.setMinutes(e),this.timepicker.timeHolder.minute.text(10>e?"0"+e:e),this.timepicker.clockHolder.clock.minutes.children("div").each((function(i,s){var r=t(s),n=r.data("minute");r[n===e?"addClass":"removeClass"]("active")}))},setT:function(e){if(void 0===e)throw new Error("Expecting a value.");this.selected.getT()!==e.toUpperCase()&&this.selected.invert();var t=this.selected.getT();this.timepicker.timeHolder.am_pm.text(t),this.timepicker.clockHolder.am["AM"===t?"addClass":"removeClass"]("active"),this.timepicker.clockHolder.pm["PM"===t?"addClass":"removeClass"]("active")},setValue:function(e){if(void 0===e)throw new Error("Expecting a value.");var t="string"==typeof e?this.parseTime(e,this.config.format):e;this.time=new r(t.hour,t.minute);var i=this.getFormattedTime();this.input.val(i.value).attr("data-time",i.time).attr("value",i.value)},resetSelected:function(){this.setHour(this.time.hour),this.setMinute(this.time.minute),this.setT(this.time.getT())},getFormattedTime:function(){return{time:this.time.format(this.config.timeFormat,!1),value:this.time.format(this.config.format,this.config.hourPadding)}},getSystemTime:function(){var e=new Date;return new r(e.getHours(),e.getMinutes())},parseTime:function(e,t){var i,s=void 0===t?this.config.format:t,n=(s.match(/h/g)||[]).length>1,o=((s.match(/m/g)||[]).length,(s.match(/t/g)||[]).length),a=e.length,c=s.indexOf("h"),m=s.lastIndexOf("h"),u="";if(this.config.hourPadding||n)u=e.substr(c,2);else{var d=s.substring(c-1,c),l=s.substring(m+1,m+2);u=m===s.length-1?e.substring(e.indexOf(d,c-1)+1,a):0===c?e.substring(0,e.indexOf(l,c)):e.substring(e.indexOf(d,c-1)+1,e.indexOf(l,c+1))}var p=(s=s.replace(/(hh|h)/g,u)).indexOf("m"),h=s.lastIndexOf("m"),v=s.indexOf("t"),f=s.substring(p-1,p);s.substring(h+1,h+2),i=h===s.length-1?e.substring(e.indexOf(f,p-1)+1,a):0===p?e.substring(0,2):e.substr(p,2);var k="pm"===(n?parseInt(u)>11?o>1?"PM":"pm":o>1?"AM":"am":e.substr(v,2)).toLowerCase(),g=new r(parseInt(u),parseInt(i));return(k&&parseInt(u)<12||!k&&12===parseInt(u))&&g.invert(),g},switchView:function(e){var t=this,i=this.timepicker;"hours"!==e&&"minutes"!==e||(t.activeView=e,i.timeHolder.hour["hours"===e?"addClass":"removeClass"]("active"),i.timeHolder.minute["hours"===e?"removeClass":"addClass"]("active"),i.clockHolder.clock.hours.addClass("animate"),"hours"===e&&i.clockHolder.clock.hours.removeClass("hidden"),clearTimeout(t.hTimeout),t.hTimeout=setTimeout((function(){"hours"!==e&&i.clockHolder.clock.hours.addClass("hidden"),i.clockHolder.clock.hours.removeClass("animate")}),"hours"===e?20:350),i.clockHolder.clock.minutes.addClass("animate"),"minutes"===e&&i.clockHolder.clock.minutes.removeClass("hidden"),clearTimeout(t.mTimeout),t.mTimeout=setTimeout((function(){"minutes"!==e&&i.clockHolder.clock.minutes.addClass("hidden"),i.clockHolder.clock.minutes.removeClass("animate")}),"minutes"===e?20:350))},show:function(){var e=this;if(""===e.input.val()){var i=e.getSystemTime();this.time=new r(i.hour,i.minute)}e.resetSelected(),t("body").attr("mdtimepicker-display","on"),e.timepicker.wrapper.addClass("animate"),e.timepicker.overlay.removeClass("hidden").addClass("animate"),setTimeout((function(){e.timepicker.overlay.removeClass("animate"),e.timepicker.wrapper.removeClass("animate"),e.visible=!0,e.input.blur()}),10)},hide:function(){var e=this;e.timepicker.overlay.addClass("animate"),e.timepicker.wrapper.addClass("animate"),setTimeout((function(){e.switchView("hours"),e.timepicker.overlay.addClass("hidden").removeClass("animate"),e.timepicker.wrapper.removeClass("animate"),t("body").removeAttr("mdtimepicker-display"),e.visible=!1,e.input.focus()}),300)},destroy:function(){this.input.removeData(i).unbind("keydown").unbind("click").removeProp("readonly"),this.timepicker.overlay.remove()}},t.fn.mdtimepicker=function(s){return t(this).each((function(){var r=t(this),o=t(this).data(i);options=t.extend({},t.fn.mdtimepicker.defaults,r.data(),"object"==e(s)&&s),o||r.data(i,o=new n(this,options)),"string"==typeof s&&o[s](),t(document).on("keydown",(function(e){27===e.keyCode&&o.visible&&o.hide()}))}))},t.fn.mdtimepicker.defaults={timeFormat:"hh:mm:ss.000",format:"h:mm tt",theme:"blue",readOnly:!0,hourPadding:!1}})();